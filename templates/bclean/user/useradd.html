{extends file="layout.html"}
{block name=title}::: LMS :{$layout.pagetitle|striphtml} :::{/block}
{block name=module_content}
    {include file="calendar_js.html"}
    <!--// $Id$ //-->
    <H1>{$layout.pagetitle} <a class="btn btn-sm btn-secondary" href="?m=userlist"><i class="fa fa-fw fa-users"></i>{trans("Users list")}</a></h1>
    <FORM class="form-inline" name="useradd" method="post" action="?m=useradd">
        <INPUT type="submit" class="hiddenbtn">
        <div class="card">
            <div class="card-header">
                {trans("Login:")}
                <INPUT class="form-control form-control-sm" type="text" name="useradd[login]" value="{$useradd.login}" required placeholder="{trans("Enter user login")}">                
            </div>
            <div class="card-block">

                {trans("First/last name:")}
                <INPUT class="form-control form-control-sm" type="text" name="useradd[name]" value="{$useradd.name}" required placeholder="{trans("Enter user name")}">

                {trans("Position:")}
                <INPUT class="form-control form-control-sm" type="text" name="useradd[position]" value="{$useradd.position}" placeholder="{trans("Enter user position (optional)")}">

                <hr>

                {trans("E-mail:")}
                <INPUT class="form-control form-control-sm" type="email" name="useradd[email]" value="{$useradd.email}" placeholder="{trans("Enter e-mail address (optional)")}">

                {trans("Phone:")}
                <INPUT class="form-control form-control-sm" type="tel" name="useradd[phone]" value="{$useradd.phone}" placeholder="{trans("Enter phone number for SMS notification (optional)")}">

                <hr>

                {trans("Notification:")}
                <label for="ntypemail">{trans("email")}</label>
                <INPUT class="form-control form-control-sm" type="checkbox" name="useradd[ntype][]" value="{$smarty.const.MSG_MAIL}" id="ntypemail"{if ($useradd.ntype & $smarty.const.MSG_MAIL)} checked{/if}>
                <label for="ntypesms">{trans("sms")}</label>
                <INPUT class="form-control form-control-sm" type="checkbox" name="useradd[ntype][]" value="{$smarty.const.MSG_SMS}" id="ntypesms"{if ($useradd.ntype & $smarty.const.MSG_SMS)} checked{/if}>                    

                <hr>

                {trans("Account active:")}
                <label for="accessyes">{trans("yes")}</label>
                <input class="form-control form-control-sm" type="radio" name="useradd[access]" value="1" id="accessyes" {if !isset($useradd.access) || $useradd.access=='1'} checked{/if}>
                <label for="accessno">{trans("no")}</label>
                <input class="form-control form-control-sm" type="radio" name="useradd[access]" value="0" id="accessno" {if $useradd.access=='0'} checked{/if}>

                {trans("Account active:")}
                {trans('from')}:<input class="form-control form-control-sm" type="text" name="useradd[accessfrom]" value="{if $useradd.accessfrom}{$useradd.accessfrom}{/if}" {tip class="calendar" text="Enter access start date in YYYY/MM/DD format. If you don't want to define 'From' date leave this field empty" trigger="accessfrom"}>
                {trans('to')}:<input class="form-control form-control-sm" type="text" name="useradd[accessto]" value="{if $useradd.accessto}{$useradd.accessto}{/if}" {tip class="calendar" text="Enter access end date in YYYY/MM/DD format. If you don't want to define 'To' date leave this field empty" trigger="accessto"}>

                <hr>

                {trans("Password:")}
                <INPUT class="form-control form-control-sm" type="password" name="useradd[password]" required placeholder="{trans("Enter password")}">

                {trans("Repeat password:")}
                <INPUT class="form-control form-control-sm" type="password" name="useradd[confirm]" required placeholder="{trans("Confirm password")}">

                {trans("Password expiration:")}
                <SELECT class="form-control form-control-sm" name="useradd[passwdexpiration]" {tip text="Select password expiration period" trigger="passwdexpiration"}>
                    {foreach from=$_PASSWDEXPIRATIONS item=item key=key}
                        <OPTION value="{$key}"{if $key == $useradd.passwdexpiration} selected{/if}>{$item}</OPTION>
                        {/foreach}
                </SELECT>                        

                <hr>        

                {trans("Allowed hosts:")}
                <INPUT class="form-control form-control-sm" type="text" size="40" name="useradd[hosts]" value="{$useradd.hosts}" placeholder="{trans("Enter comma-separated list of hosts or networks (optional)")}">

                <hr>

                {trans("Access rights:")}
                {foreach $accesslist as $name => $access}
                    <INPUT class="form-control form-control-sm" type="checkbox" id="acl_{$access@index}" name="acl[{$name}]" value="1" {if $access.enabled} checked{/if}> <label for="acl_{$access@index}">{$access.name}</label><BR>
                {/foreach}
                {assign var="name" value=""}

                <hr>

                {trans("Groups:")}
                {include file="multiselect.html" selected=$useradd.selected available_tip="Enabled<!plural>:" selected_tip="Disabled<!plural>:"}
            </div>
            <div class="card-footer">
                <A class="btn btn-sm btn-danger" href="javascript:document.useradd.submit();" accesskey="s">{trans("Submit")}</A>
                <A class="btn btn-sm btn-secondary" href="?m=userlist">{trans("Cancel")}</A>
            </div>                
        </div>
    </FORM>
    <SCRIPT type="text/javascript">
        <!--
    document.forms['useradd'].elements['useradd[login]'].focus();
        //-->
    </SCRIPT>
{/block}
