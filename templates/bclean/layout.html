<!DOCTYPE html>
<html lang="{$LANGDEFS.$_ui_language.html}">
    <head>
        <title>{block name=title}::: LMS :::{/block}</title>
        <meta name="GENERATOR" content="LMS {$layout.lmsv}">
        <meta charset="{$LANGDEFS.$_ui_language.charset}">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <link href="{ConfigHelper::getConfig('phpui.style', 'img/style_tmp.css')}" rel="stylesheet" type="text/css">
        <link href="templates/bclean/vendor/components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="templates/bclean/vendor/twbs/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <script type="text/javascript" src="templates/bclean/vendor/components/jquery/jquery.min.js"></script>
        <script type="text/javascript" src="templates/bclean/vendor/bordercloud/tether/dist/js/tether.min.js"></script>
        <script type="text/javascript" src="templates/bclean/vendor/twbs/bootstrap/dist/js/bootstrap.min.js"></script>
        <link href="img/map.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.1/css/bootstrap-datepicker.min.css">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.1/js/bootstrap-datepicker.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.1/locales/bootstrap-datepicker.pl.min.js"></script>
    {block name="extra-css-styles"}{/block}
    <link href="img/lms-net.gif" rel="shortcut icon">
    <script type="text/javascript" src="img/common.js"></script>
    <script type="text/javascript" src="img/autosuggest.js"></script>
    <script>
        $(document).ready(function () {

            //customeradd
            $('#cutoffstop').datepicker({
                format: 'yyyy/mm/dd',
                language: "pl",
                todayHighlight: true,
                autoclose: true
            });

            //eventadd
            $('.datepicker_default').datepicker({
                format: 'yyyy/mm/dd',
                language: "pl",
                todayHighlight: true,
                autoclose: true
            });

            var lastState = localStorage.getItem('lastState');

            if (!lastState) {
                lastState = [];
                localStorage.setItem('lastState', JSON.stringify(lastState));
            } else {
                lastStateArray = JSON.parse(lastState);
                var arrayLength = lastStateArray.length;
                for (var i = 0; i < arrayLength; i++) {
                    var panel = '#' + lastStateArray[i];
                    $(panel).addClass('in');
                }
            }

            $('#accordion').on('shown.bs.collapse', '.panel-collapse', function () {
                lastState = JSON.parse(localStorage.getItem('lastState'));
                if ($.inArray($(this).attr('id'), lastState) == -1) {
                    lastState.push($(this).attr('id'));
                }
                ;
                localStorage.setItem('lastState', JSON.stringify(lastState));
            });

            $('#accordion').on('hidden.bs.collapse', '.panel-collapse', function () {
                lastState = JSON.parse(localStorage.getItem('lastState'));
                lastState.splice($.inArray($(this).attr('id'), lastState), 1);
                localStorage.setItem('lastState', JSON.stringify(lastState));
            });

        });
    </script>

    <style>
        * {
            font-size: 14px;
        }

        /* Font Awesome Radio Buttons and Checkboxes https://gist.github.com/pom-pom/10255961 */
    </style>
    <!-- //todo => https://scotch.io/bar-talk/different-tricks-on-how-to-make-bootstrap-columns-all-the-same-height -->
</head>
<body onload="start_login_timeout({ConfigHelper::getConfig('phpui.timeout')})">
    <div id="overDiv" style="position:absolute; visibility:hidden; z-index:100;"></div>
    <script type="text/javascript" src="img/overlib.js"></script>
    {if $layout.popup}
    {block name=module_content}{/block}
{else}
    <div class="container-fluid">
        <div class="row">
            {block name=pageleftbar}
                <div class="col-md-2">
                    <a class="display-4" href="https://{$smarty.server.SERVER_NAME}">LMS</a>

                    <div id="accordion" role="tablist" aria-multiselectable="true">
                        {counter start=0 skip=1 assign=menuID}
                        {foreach from=$newmenu item=menuitem name=menu}
                            <div class="panel panel-default">
                                <div class="panel-heading" role="tab" id="heading{$menuID}">
                                    <i class="fa fa-fw {$menuitem.fa}"></i>
                                    <a class="panel-title collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapse{$menuID}" aria-expanded="false" aria-controls="collapse{$menuID}">
                                        {$menuitem.name}
                                    </a>
                                </div>
                                {if $menuitem.submenu}
                                    <div id="collapse{$menuID}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading{$menuID}">
                                        <ul>
                                            {foreach from=$menuitem.submenu item=submenuitem}
                                                <li><a href="{$submenuitem.link|replace:"&":"&amp;"}">{$submenuitem.name}</a></li>
                                                {/foreach}
                                        </ul>
                                    </div>
                                {/if}
                            </div>
                            {counter}
                        {/foreach}
                    </div>
                    <a class="text-danger" onClick="if (confirm('{trans("Are you sure that you want to logout?")}')) {
                                return self.location.href = '?m=logout&amp;is_sure=1';
                            }"><i class="fa fa-fw fa-sign-out"></i>{trans("Logout")}</a>
                </div>
            {/block}

            {block name=pagecontent}
                <div class="col-md-10">
                    <script type="text/javascript">
                        <!--//
                         var AUTOSUGGEST_MAX_LENGTH = {ConfigHelper::getConfig('phpui.autosuggest_max_length', 40)};
                        //-->
                    </script>
                    {block name=quicksearch}
                        <div id="autosuggest"><ul><li></li></ul></div>
                        <form method="post" class="form-inline m-b-1" name="quicksearch" action="?m=quicksearch" id="quicksearch">
                            {include file="quicksearchcontents.html"}
                        </form>
                        <SCRIPT type="text/javascript">
                            <!--//
                            document.forms['quicksearch'].elements['customerinput'].focus();
                            //-->
                        </SCRIPT>
                    {/block}
                    {if ! ConfigHelper::checkConfig('phpui.hide_toolbar')}
                        {include file="toolbar.html"}
                    {/if}
                {block name=module_content}{/block}
                <!--// $Id$ //-->
                {block name="footer"}
                    {if $layout.dberrors}
                        {include file="dberrors.html"}
                    {/if}
                {/block}
            </div>
        {/block}
    </div>
    <div class="row">
        <div class="col-md-12">
            <p class="text-center">
                <span class="text-muted">{trans("Page generation time:")} {gentime} {trans("sec.")} {memory}</span>
                <br>
                LMS {$layout.lmsv} {if $layout.lmsvr}({$layout.lmsvr}) {/if}DB: {$layout.dbschversion} @ {$layout.hostname}
                <br>
                <img src="{ConfigHelper::getConfig('phpui.logo', 'img/logo-40.png')}" alt="LMS {$layout.lmsv}">
                <br>
                <A href="?m=copyrights">&copy; 2001-{$smarty.now|date_format:'%Y'} LMS Developers</A>
            </p>
        </div>
    </div>
</div>
{/if}
{$lms_swekey}
</body>
</html>
